<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Book Your Stay | Sa Dommo e Mare</title>
  <meta name="description" content="Send a booking enquiry for Sa Dommo e Mare â€” steps from the beach in Sardinia." />
  <link rel="preconnect" href="https://images.unsplash.com">
  <style>
    :root{
      --bg:#0b1220;
      --bg-soft:#0f1730;
      --card:#121a35;
      --text:#eaf0ff;
      --muted:#a8b3cf;
      --brand:#58a6ff;
      --brand-2:#22d3ee;
      --ring: 0 8px 40px rgba(88,166,255,.15);
      --radius: 16px;
      --border: 1px solid rgba(255,255,255,.08);
    }

    /* Base */
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:linear-gradient(180deg,var(--bg) 0%, #0b1220 50%, #0a1020 100%);color:var(--text);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;scroll-behavior:smooth}
    img{max-width:100%;display:block}
    a{color:inherit;text-decoration:none}
    .container{width:min(900px,100%);margin-inline:auto;padding:24px}
    .btn{display:inline-flex;align-items:center;gap:10px;background:linear-gradient(135deg,var(--brand),var(--brand-2));border:none;color:#081023;padding:12px 18px;border-radius:12px;font-weight:700;cursor:pointer;box-shadow:var(--ring);transition:.25s transform}
    .btn:hover{transform:translateY(-2px)}
    .btn.ghost{background:transparent;color:var(--text);border:1px solid rgba(255,255,255,.15)}
    .pill{padding:6px 10px;border-radius:999px;background:rgba(88,166,255,.15);font-size:12px;color:#cfe2ff;border:1px solid rgba(88,166,255,.25)}
    .card{background:var(--card);border:var(--border);border-radius:var(--radius);box-shadow:var(--ring)}

    /* Header (matches home) */
    header.site{
      position:sticky;top:0;z-index:50;
      backdrop-filter:saturate(180%) blur(10px);
      background:linear-gradient(180deg,rgba(10,16,32,.85),rgba(10,16,32,.35));
      border-bottom:var(--border);
    }
    .nav{display:flex;align-items:center;justify-content:space-between;height:64px;gap:16px}
    .brand{display:flex;align-items:center;gap:12px;font-weight:800;letter-spacing:.3px}
    .brand .logo{width:32px;height:32px;border-radius:8px;background:linear-gradient(135deg,var(--brand),var(--brand-2));box-shadow:0 0 0 3px rgba(34,211,238,.25) inset}
    nav ul{display:flex;gap:18px;list-style:none;margin:0;padding:0}
    nav a{padding:8px 10px;border-radius:10px;color:var(--muted)}
    nav a:hover, nav a.active{background:rgba(255,255,255,.06);color:var(--text)}
    .nav-actions{display:flex;gap:10px}
    .burger{display:none;background:transparent;border:1px solid rgba(255,255,255,.15);border-radius:10px;color:var(--text);padding:8px 10px}
    @media (max-width:900px){
      nav ul{display:none;position:absolute;top:64px;right:16px;background:var(--bg-soft);padding:12px;border-radius:12px;border:var(--border);width:min(260px,calc(100% - 32px));box-shadow:var(--ring)}
      nav ul.open{display:flex;flex-direction:column}
      .burger{display:inline-flex}
      .nav-actions .btn{display:none}
    }

    /* Page header */
    .page-head{padding-top:18px;padding-bottom:4px}
    .page-head h1{margin:6px 0 4px}
    .page-head p{color:var(--muted);margin:0}

    /* Form */
    form.booking{margin-top:18px;padding:18px}
    form.booking .row{display:grid;grid-template-columns:1fr 1fr;gap:14px}
    @media (max-width:700px){ form.booking .row{grid-template-columns:1fr} }
    label{font-weight:600;font-size:14px;margin:4px 0 6px;display:block}
    input[type="text"], input[type="email"], textarea{
      width:100%;padding:12px 14px;border-radius:12px;background:#0d1530;border:1px solid rgba(255,255,255,.10);
      color:var(--text);outline:none;transition:border-color .2s, box-shadow .2s;
    }
    input::placeholder, textarea::placeholder{color:#8ea0c7}
    input:focus, textarea:focus{border-color:rgba(88,166,255,.55);box-shadow:0 0 0 3px rgba(88,166,255,.2)}
    textarea{min-height:120px;resize:vertical}
    .actions{display:flex;gap:10px;justify-content:flex-end;margin-top:12px}

    /* Modal (dark) */
    .modal-overlay{
      position:fixed;inset:0;background:rgba(5,10,20,.8);display:none;align-items:center;justify-content:center;z-index:60;padding:24px;
      backdrop-filter: blur(6px);
    }
    .modal-overlay.open{display:flex}
    body.no-scroll{overflow:hidden}

    .modal{
      width:min(420px,100%);max-height:90vh;overflow:auto;
      background:var(--bg-soft);border:var(--border);border-radius:14px;padding:16px;box-shadow:var(--ring)
    }
    .modal-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
    .modal-title{font-weight:700}
    .modal-close{background:transparent;border:1px solid rgba(255,255,255,.18);color:var(--text);padding:8px 10px;border-radius:10px;cursor:pointer}

    .check-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:10px}
    .check-box{display:flex;align-items:center;gap:10px;background:rgba(255,255,255,.04);border:var(--border);border-radius:12px;padding:10px}
    .check-label{font-size:12px;color:var(--muted)}
    .check-text{font-size:14px}

    .calendar-widget{margin-bottom:12px}
    .cal-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
    .cal-controls{display:flex;gap:6px}
    .cal-top button{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.18);color:var(--text);padding:6px 10px;border-radius:10px;cursor:pointer}
    .weekday-row{display:grid;grid-template-columns:repeat(7,1fr);gap:4px;text-align:center;font-size:12px;color:#a8b3cf;margin-bottom:6px}
    .days-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:4px}
    .day{
      width:100%;min-height:42px;padding:8px;border:none;border-radius:10px;text-align:center;cursor:pointer;
      background:rgba(255,255,255,.03);color:var(--text);
      transition:transform .15s ease, background .15s ease;
    }
    .day:hover{transform:translateY(-1px);background:rgba(255,255,255,.06)}
    .day.range{background:linear-gradient(135deg, rgba(88,166,255,.18), rgba(34,211,238,.18))}
    .day.selected{background:linear-gradient(135deg, rgba(88,166,255,.35), rgba(34,211,238,.35));font-weight:700}
    .day.is-disabled,.day.other-month{
      color:#9ca3af;background:#1a2344;cursor:not-allowed;opacity:.9;
    }
    .day.is-disabled:hover,.day.other-month:hover{background:#1a2344}

    .modal-actions{display:flex;justify-content:flex-end;gap:8px;margin-top:10px}
    .btn.small{padding:8px 12px;border-radius:10px}

    /* Footer */
    footer{padding:32px 0;border-top:var(--border);color:var(--muted);text-align:center;margin-top:28px}
  </style>
</head>
<body>
  <!-- Header -->
  <header class="site">
    <div class="container nav">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <span>Sa Dommo e Mare</span>
      </div>
      <nav aria-label="Main">
        <button class="burger" aria-expanded="false" aria-controls="menu">â˜° Menu</button>
        <ul id="menu">
          <li><a href="index.html">Home</a></li>
          <li><a href="index.html#features">Highlights</a></li>
          <li><a href="index.html#gallery">Gallery</a></li>
          <li><a class="active" href="booking.html">Book Now</a></li>
        </ul>
      </nav>
      <div class="nav-actions">
        <a href="booking.html" class="btn">Book Now</a>
      </div>
    </div>
  </header>

  <!-- Content -->
  <main class="container">
    <section class="page-head">
      <span class="pill">Booking enquiry</span>
      <h1>Book Your Stay</h1>
      <p>Weâ€™d love to welcome you! Send your dates and any questions â€” weâ€™ll get back quickly.</p>
    </section>

    <form action="https://formspree.io/f/mexample" method="POST" id="bookingForm" class="card booking">
      <div class="row">
        <div>
          <label for="name">Full Name</label>
          <input type="text" id="name" name="name" autocomplete="name" required>
        </div>
        <div>
          <label for="email">Email Address</label>
          <input type="email" id="email" name="_replyto" autocomplete="email" required>
        </div>
      </div>

      <div class="row">
        <div>
          <label for="dates">Preferred Dates</label>
          <input type="text" id="dates" name="dates" placeholder="Click to select dates" readonly required>
          <input type="hidden" id="checkin" name="checkin">
          <input type="hidden" id="checkout" name="checkout">
        </div>
        <div>
          <label for="guests">Guests (optional)</label>
          <input type="text" id="guests" name="guests" placeholder="e.g., 2 adults, 1 child">
        </div>
      </div>

      <div>
        <label for="message">Message</label>
        <textarea id="message" name="message" rows="5" placeholder="Tell us anything helpful (arrival time, questions, etc.)" required></textarea>
      </div>

      <div class="actions">
        <a href="index.html" class="btn ghost">Back to Home</a>
        <button type="submit" class="btn">Send Request</button>
      </div>
    </form>
  </main>

  <footer>
    &copy; 2025 Sa Dommo e Mare &nbsp;â€¢&nbsp; <a href="mailto:roberto.cannas@hotmail.it">roberto.cannas@hotmail.it</a>
  </footer>

  <!-- Date Picker Modal -->
  <div class="modal-overlay" id="dateModal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title" id="modalTitle">Select Dates</div>
        <button id="closeModal" class="modal-close" aria-label="Close date picker">âœ•</button>
      </div>

      <div class="check-grid">
        <div>
          <div class="check-label">Check-in</div>
          <div class="check-box">
            <div class="icon" aria-hidden="true">ðŸ“…</div>
            <div class="check-text" id="checkinText">â€”</div>
          </div>
        </div>
        <div>
          <div class="check-label">Check-out</div>
          <div class="check-box">
            <div class="icon" aria-hidden="true">ðŸ“…</div>
            <div class="check-text" id="checkoutText">â€”</div>
          </div>
        </div>
      </div>

      <div class="calendar-widget">
        <div class="cal-top">
          <div class="cal-controls">
            <button id="prevMonth" aria-label="Previous month">â—€</button>
            <button id="todayBtn" aria-label="Current month">Today</button>
          </div>
          <div id="monthTitle" aria-live="polite" style="font-weight:700"></div>
          <div class="cal-controls">
            <button id="nextMonth" aria-label="Next month">â–¶</button>
          </div>
        </div>

        <div class="weekday-row" aria-hidden="true">
          <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
        </div>
        <div class="days-grid" id="daysGrid" role="grid" aria-label="Calendar days"></div>
      </div>

      <div class="modal-actions">
        <button id="cancelBtn" class="btn small ghost" type="button">Cancel</button>
        <button id="applyBtn" class="btn small" type="button">Apply</button>
      </div>
    </div>
  </div>

  <script>
    // Mobile menu
    const burger = document.querySelector('.burger');
    const menu = document.getElementById('menu');
    burger?.addEventListener('click', () => {
      const open = menu.classList.toggle('open');
      burger.setAttribute('aria-expanded', String(open));
    });

    // =========================
    // Modal + Calendar (1 month)
    // =========================
    document.addEventListener('DOMContentLoaded', function(){
      const datesInput = document.getElementById('dates');
      const checkinHidden = document.getElementById('checkin');
      const checkoutHidden = document.getElementById('checkout');
      const dateModal = document.getElementById('dateModal');
      const closeModalBtn = document.getElementById('closeModal');
      const cancelBtn = document.getElementById('cancelBtn');
      const applyBtn = document.getElementById('applyBtn');
      const checkinText = document.getElementById('checkinText');
      const checkoutText = document.getElementById('checkoutText');
      const monthTitle = document.getElementById('monthTitle');
      const daysGrid = document.getElementById('daysGrid');
      const prevMonthBtn = document.getElementById('prevMonth');
      const nextMonthBtn = document.getElementById('nextMonth');
      const todayBtn = document.getElementById('todayBtn');

      let viewDate = new Date(); viewDate.setDate(1);
      let startDate = null, endDate = null;

      // Normalize "today"
      const today = new Date(); today.setHours(0,0,0,0);

      function pad(n){return n<10?'0'+n:n;}
      function formatDate(d){return d.getFullYear()+'-'+pad(d.getMonth()+1)+'-'+pad(d.getDate());}
      function formatFriendly(d1,d2){
        if(!d1) return '';
        const months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
        if(!d2 || d1.getTime()===d2.getTime()) return months[d1.getMonth()]+' '+d1.getDate()+', '+d1.getFullYear();
        return months[d1.getMonth()]+' '+d1.getDate()+' â€“ '+months[d2.getMonth()]+' '+d2.getDate();
      }

      function openModal(){
        dateModal.classList.add('open');
        document.body.classList.add('no-scroll');
        renderCalendar();
      }
      function closeModalFn(commit=false){
        dateModal.classList.remove('open');
        document.body.classList.remove('no-scroll');
        if(commit && startDate){
          datesInput.value = formatFriendly(startDate,endDate||startDate);
          checkinHidden.value = formatDate(startDate);
          checkoutHidden.value = endDate ? formatDate(endDate) : '';
        }
      }

      function renderCalendar(){
        monthTitle.textContent = viewDate.toLocaleString('default',{month:'long',year:'numeric'});
        daysGrid.innerHTML='';
        const year = viewDate.getFullYear(), month = viewDate.getMonth();
        const firstDay = new Date(year,month,1);
        const startWeek = firstDay.getDay();
        const lastDate = new Date(year,month+1,0).getDate();
        const prevLast = new Date(year,month,0).getDate();

        for (let i = 0; i < 42; i++) {
          const btn = document.createElement('button');
          btn.type = 'button';
          btn.className = 'day';
          btn.setAttribute('role','gridcell');

          const dayNum = i - startWeek + 1;
          let cellDate, isOtherMonth = false;

          if (dayNum <= 0) {
            cellDate = new Date(year, month - 1, prevLast + dayNum);
            isOtherMonth = true;
          } else if (dayNum > lastDate) {
            cellDate = new Date(year, month + 1, dayNum - lastDate);
            isOtherMonth = true;
          } else {
            cellDate = new Date(year, month, dayNum);
          }

          btn.textContent = cellDate.getDate();

          // Normalize for comparison
          const normalizedCell = new Date(cellDate.getFullYear(), cellDate.getMonth(), cellDate.getDate());
          const isPast = normalizedCell < today;

          if (isOtherMonth) btn.classList.add('other-month');

          // Disable past & other-month spillover
          if (isPast || isOtherMonth) {
            btn.classList.add('is-disabled');
            btn.disabled = true;
            btn.setAttribute('aria-disabled','true');
          }

          // Selected / range visuals (only enabled cells)
          if (!btn.disabled) {
            const normStart = startDate ? new Date(startDate.getFullYear(), startDate.getMonth(), startDate.getDate()) : null;
            const normEnd   = endDate   ? new Date(endDate.getFullYear(),   endDate.getMonth(),   endDate.getDate())   : null;

            if (normStart && normEnd && normalizedCell >= normStart && normalizedCell <= normEnd) {
              btn.classList.add('range');
            }
            if ((normStart && normalizedCell.getTime() === normStart.getTime()) ||
                (normEnd && normalizedCell.getTime() === normEnd.getTime())) {
              btn.classList.add('selected');
            }
          }

          btn.addEventListener('click', () => {
            if (btn.disabled) return;
            if (!startDate || (startDate && endDate)) {
              startDate = new Date(normalizedCell);
              endDate = null;
            } else if (!endDate) {
              endDate = new Date(normalizedCell);
            }
            checkinText.textContent = startDate ? formatFriendly(startDate, null) : 'â€”';
            checkoutText.textContent = endDate ? formatFriendly(endDate, null) : 'â€”';
            renderCalendar();
          });

          daysGrid.appendChild(btn);
        }
      }

      // Open/close hooks
      datesInput.addEventListener('click',openModal);
      closeModalBtn.addEventListener('click',()=>closeModalFn(false));
      cancelBtn.addEventListener('click',()=>closeModalFn(false));
      applyBtn.addEventListener('click',()=>closeModalFn(true));
      dateModal.addEventListener('click',(e)=>{ if(e.target===dateModal) closeModalFn(false); });
      document.addEventListener('keydown',(e)=>{ if(e.key==='Escape' && dateModal.classList.contains('open')) closeModalFn(false); });

      // Month controls
      prevMonthBtn.addEventListener('click',()=>{ viewDate.setMonth(viewDate.getMonth()-1); renderCalendar(); });
      nextMonthBtn.addEventListener('click',()=>{ viewDate.setMonth(viewDate.getMonth()+1); renderCalendar(); });
      todayBtn.addEventListener('click',()=>{ viewDate = new Date(); viewDate.setDate(1); renderCalendar(); });
    });
  </script>
</body>
</html>
